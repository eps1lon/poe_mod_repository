!function(e){this.Scouring=Currency.extend({init:function(){this._super([])},applyTo:function(e){var i,t,a,l;return this.applicableTo(e)?(i=-1!==e.inMods(MasterMod.METAMOD.LOCKED_PREFIXES),t=-1!==e.inMods(MasterMod.METAMOD.LOCKED_SUFFIXES),$.each(e.affixes(),function(a,l){l.isPrefix()&&!i?e.removeMod(l):l.isSuffix()&&!t&&e.removeMod(l)}),a=e.prefixes().length,l=e.suffixes().length,0===a&&0===l?e.rarity=Item.RARITY.NORMAL:a>1||l>1?e.rarity=Item.RARITY.RARE:e.rarity=Item.RARITY.MAGIC,!0):!1},applicableTo:function(i,t){switch(this._super(i,t),this.applicable_byte&=~Applicable.SUCCESS,t===e?t=Applicable.SUCCESS:t|=Applicable.SUCCESS,i.rarity){case Item.RARITY.NORMAL:this.applicable_byte|=Scouring.APPLICABLE_BYTE.ALREADY_WHITE;break;case Item.RARITY.UNIQUE:this.applicable_byte|=Scouring.APPLICABLE_BYTE.UNIQUE}return this.applicable_byte||(this.applicable_byte=Applicable.SUCCESS),!ByteSet.byteBlacklisted(this.applicable_byte,t)},applicableByteHuman:function(){return ByteSet.human(this.applicable_byte,Scouring.APPLICABLE_BYTE,Scouring.APPLICABLE_BYTE.SUCCESS)}}),this.Scouring.APPLICABLE_BYTE={UNSCANNED:0,SUCCESS:1,NOT_AN_ITEM:2,ALREADY_WHITE:4,UNIQUE:8}}();
!function(t){this.Transmute=Currency.extend({init:function(t){this._super(t,Transmute.mod_filter)},applyTo:function(t){return this.applicableTo(t)?(t.rarity=Item.RARITY.MAGIC,t.addMod(this.chooseMod(t)),Math.random()<=.5&&t.addMod(this.chooseMod(t)),!0):!1},map:function(t,e){var i=t.rarity;t.rarity=Item.RARITY.MAGIC;var a=this._super(t,e);return t.rarity=i,a},mods:function(t,e){var i=t.rarity;t.rarity=Item.RARITY.MAGIC;var a=this._super(t,e);return t.rarity=i,a},applicableTo:function(e,i){return this._super(e,i),this.applicable_byte&=~Applicable.SUCCESS,i===t?i=Applicable.SUCCESS:i|=Applicable.SUCCESS,e.rarity!==Item.RARITY.NORMAL&&(this.applicable_byte|=Transmute.APPLICABLE_BYTE.NOT_WHITE),this.applicable_byte||(this.applicable_byte=Applicable.SUCCESS),!ByteSet.byteBlacklisted(this.applicable_byte,i)},applicableByteHuman:function(){return ByteSet.human(this.applicable_byte,Transmute.APPLICABLE_BYTE,Transmute.APPLICABLE_BYTE.SUCCESS)}}),this.Transmute.APPLICABLE_BYTE={UNSCANNED:0,SUCCESS:1,NOT_AN_ITEM:2,NOT_WHITE:4},this.Transmute.mod_filter=function(t){return-1!==[Mod.MOD_TYPE.PREFIX,Mod.MOD_TYPE.SUFFIX].indexOf(+t.GenerationType)}}();
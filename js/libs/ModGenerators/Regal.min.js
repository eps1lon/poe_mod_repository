!function(t){this.Regal=Currency.extend({init:function(t){this._super(t,Transmute.mod_filter)},applyTo:function(t){return this.applicableTo(t)?(t.rarity=Item.RARITY.RARE,t.addMod(this.chooseMod(t))):!1},map:function(t,e){var a=t.rarity;t.rarity=Item.RARITY.RARE;var i=this._super(t,e);return t.rarity=a,i},mods:function(t,e){var a=t.rarity;t.rarity=Item.RARITY.RARE;var i=this._super(t,e);return t.rarity=a,i},applicableTo:function(e,a){return this._super(e,a),this.applicable_byte&=~Applicable.SUCCESS,a===t?a=Applicable.SUCCESS:a|=Applicable.SUCCESS,e.rarity!==Item.RARITY.MAGIC&&(this.applicable_byte|=Regal.APPLICABLE_BYTE.NOT_MAGIC),this.applicable_byte||(this.applicable_byte=Applicable.SUCCESS),!ByteSet.byteBlacklisted(this.applicable_byte,a)},applicableByteHuman:function(){return ByteSet.human(this.applicable_byte,Regal.APPLICABLE_BYTE,Regal.APPLICABLE_BYTE.SUCCESS)}}),this.Regal.APPLICABLE_BYTE={UNSCANNED:0,SUCCESS:1,NOT_AN_ITEM:2,NOT_MAGIC:4}}();